<h1>Metal Makefile</h1>

<p>As you can probably guess, the development and CI/CD workflow for Metal is
driven with Make. This document will contain sections related to build targets
and recipes. To have a look at this documentation in your local browser,
execute:</p>

<p><code>make</code></p>

<h2>Development Environments</h2>

<p>For each service and server within metal there is a corresponding development
environment driven by docker-compose files in the docker directory. A
development environment is defined by a yml file within this directory without
the file extension. The current list of development environments:</p>

<ul>
<li>rexecd-mysql-server</li>
</ul>

<p>There are also actions associated with each development environment. The
following actions are:</p>

<ul>
<li>start</li>
<li>status</li>
<li>stop</li>
<li>restart</li>
</ul>

<p>For each development environment and action there exists a phony make target
for orchestrating your development environment:</p>

<ul>
<li>rexecd-mysql-server-start</li>
<li>rexecd-mysql-server-status</li>
<li>rexecd-mysql-server-stop</li>
<li>rexecd-mysql-server-restart</li>
</ul>

<h2>Testing</h2>

<ul>
<li>unit: executes all unit tests</li>
<li>smoke: executes all smoke tests</li>
</ul>

<h2>Protobuf</h2>

<p>For each service managed via gRPC there is a corresponding directory under
proto containing protobuf files defining services and messages for the
corresponding service.</p>

<ul>
<li>proto: rebuild all golang packages from the corresponding protobuf files</li>
</ul>

<h2>Dependencies</h2>

<p>All dependencies are managed with Go modules.</p>

<ul>
<li>get: update all golang dependencies. You may pass the -e flag to make and set
   the PACKAGE variable to only get one package</li>
<li>update: same as get, but updates</li>
</ul>

<h2>Installation</h2>

<p>Local installation is handled via the go binary</p>

<ul>
<li>install: installs metal into GOBIN</li>
</ul>
